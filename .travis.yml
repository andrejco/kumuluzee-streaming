language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: "ItYLlh/SQ0lR2qYInIBL38yBIcRDy3w0DLz6BUe2zG4FAjb9VnR0oY8AglucOtrHCPdQk/tGtF4FGVR6O2LZVHjDJgbU0cHEobyNNl9K423MPoA6mS5ZwhkCpPqD08I66rT5Fz1yGOlNgFsc57DdfQH7vQMVMihH5bXUz3oYnLSl5wg32yTz3D2rE0Ehca5BxpqrASukpybfxG/YZJxJwtXQ47QxmeS3J7EP1RxNgolpRXrmc103oLLxbCQyQqMAQLMahwWdnZrIT+Bm4iQH4CxP31o7qt1DQ8QykQAthmLlhpFbj0CXCHNdgsyz1MHDXUgHBK8CEX7L2JomnRA52t46Z+Xw7KlnAlk+dbW1Y0ZhBYM1Bl1k+OyZKZ0kvJDgRxlp+aAtBnyKfq4tVZB86LIXhkhC7xdE+CfMxY09NE2ajzBsri6SufWuA86yWa25xHlHno60yLr2IEC94ph2ioOKylUkXPGv3iL6JJdIoqIpJS1SAQ+CouaxbXBY1at2mbrSC9m8FYoWMsqW1/XMV8u2P+X562+s3tOHrVMezE6OW/wognaB76QhszbzV/Yn9RUJuULAkaXwFbQJc4+VETWtt8oZFdag7PQAu9dn3Ht3i4wA6dM4jsSd6BeC9Fsq9hBK0i1ty+ocRWPjR+3IqrGstNC12wcch+L6cj42DPg="
  - secure: "fcbX+UIQHdzw3M/NDnZlYhuQQwu8DVc8bZ+f+5llssC2FrSYDCHG06bBwawaRV0V1q2Ib1AHQHi+Hmrgvp1UkgV7l+lWEiGwDH71NTANycfUbHFIbtUSwSeMC2WvF+Y1tdo5l/P1CWrJ6mBgKNu0CQ0wZ7BJ+BJyZnxKwEdKsg3tTP2aRlUCXK/wfhv7WPlF6mzSi589ZwQ6gcVb29ee8EMu7btG2n1GQ0hFUlF46ZSCwfd2msO+MCRNa97O9BcSPdOMkmgK0waTKCOhk7uXurUGZzZRKFPULvf4yBz1haj6EMfIW5sT1CClCNW4rKb4TvePpeeth2qrk3rBSWLmUAoxyMgGHoNSjPHvlFTf6Hqoh+WeYzZDxVGt3odeKV82LsyarDjCBU2H1kOAyNv7+O/5n255wOGQz5MdlGUUhlnMOweLxV+F/aOLTJsFqwSHunVSYc6tkudzvv5c5YPf0XLPbYlIUgZLJM+bqbCniEMVzzDjnSdjuanLXeUcK/jCtA4IXizoo0ERWEMWaqGNDJIdGGg2tqvqWod80TI44bk9WgKfRLiaLEftYf7KTDnpvIkG3A2/lwesn+KE3dr2IACOeIkTl1hjM2ojCLFx/iceDRp9EQoo/onu7IZbT3CP/qxK/KiJGzfDFj+XWsQ3qe7VuIlB8vcrJ3In0EWDbt0="
  - secure: "inaKxj12jOfLjpV9C4Y58GsbDoxfFCTbB3Pf8GNeiUW3HFH0bNxGSDax5RlZIv9EpmPrfVpp1I+63+BxZ/mZ5JojmXs2n7fLEwZ6IBN9P3fxsbOvL6QJVvYLqEhia03gLINIpVhBQwXURIznT7JcVL5PS+Ne7sqLpFeX9gb+iC34n6vHH1PF2in/BFO7yRXkvpi2MEcmSK4YmzS0B7cmnauGJNke4/YXB4m7QxVwiO2JZeOhI5mingu4CqUn48vTVIuDtHfFbs3q9Yc/P3jlh/p+YvmJPzm+Ow8BdyhwTXhOOJ27ZaQSUBaAKlsqNdIdSMpuSm1xM3+v7VMi3jiBYv5x8wygAamGvhkGLJ8VKrMwasBaFsvQAT/FrB6w3fnu/huq4G8khK7WldNp5UiQXaMBMzcD+EL0X6g9iIZwEAmrguaHeP298xnkacSdGbWvKZsk3OfK7I+MQ91JhUb/qyvjaortUKZ4riB3ohog3bz0/V6oI3mghm0ab502hjv/84xG1fFnJa7IzQ9kFyhmiX+9XuNTwSA9tmHyMxYiS/P/Ideo1nR7xWmRgytSM+y1X01cNjBD/Nf8IAs4FfIYjeMAmeqVWNx1hqRUbBeEUPQc+0C9LysaaShLlmdKbXCg3pUTnQ513rw3fQQ4qwqhT3SpjaFgJIf1JScKsl9x8E8="

cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_e9459810d90e_key -iv $encrypted_e9459810d90e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi